<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>COOLFluiD: Installing a developer version</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="coolfluid.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">COOLFluiD
   &#160;<span id="projectnumber">Release  kernel</span>
   </div>
   <div id="projectbrief">COOLFluiD is a Collaborative Simulation Environment (CSE) focused on complex MultiPhysics simulations.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="index.html">COOLFluiD Documentation</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Installing a developer version </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><dl class="section note"><dt>Note</dt><dd>This tutorial works only for Linux and Mac OS X command line <a href="http://en.wikipedia.org/wiki/Bash_(Unix_shell)">bash</a> environments.</dd></dl>
<h1><a class="anchor" id="_installation_register"></a>
New Developers</h1>
<p>The main development of coolfluid3 is hosted as a <a href="http://git-scm.com/">git</a> repository on <a href="https://github.com">github</a> .</p>
<p>Developers are required to create a github account at <a href="https://github.com">https://github.com</a> and create a fork of their own version of coolfluid3 from <a href="https://github.com/coolfluid/coolfluid3">https://github.com/coolfluid/coolfluid3</a> .</p>
<p>Developers new to git or github should read github's excellent <a href="http://help.github.com/">help pages</a>.</p>
<p>You should now have your own repository of coolfluid3 at <a href="https://github.com/your_name/coolfluid3">https://github.com/your_name/coolfluid3</a> .</p>
<h1><a class="anchor" id="_installation_get_sources"></a>
Get the sources</h1>
<p>Make sure you have git installed, and configured for github as described <a href="http://help.github.com/set-up-git-redirect">here</a>.</p>
<p>Create a directory to hold your sources and the build files:</p>
<pre class="fragment">$&gt; mkdir coolfluid3
$&gt; cd coolfluid3
$&gt; git clone git@github.com:your_name/coolfluid3.git kernel
</pre><p>Lets remember this directory to help the rest of the installation:</p>
<pre class="fragment">$&gt; export CF3=$PWD
</pre><h1><a class="anchor" id="_installation_prerequisites"></a>
Prerequisites</h1>
<p>COOLFluiD 3 depends on several third-party libraries, to enable extra functionality. Of all the third-party libraries, only 3 are absolutely necessary. These dependencies will allow coolfluid to build with minimum functionality, and several disabled coolfluid libraries.</p>
<ul>
<li>
<a href="http://www.cmake.org/">CMake </a> version 2.8.2 or higher. </li>
<li>
<a href="http://www.boost.org/">Boost C++ Libraries </a>, offering a multitude of nice additions to C++. <ul>
<li>
Mandatory boost build options:<pre class="fragment">--with-test --with-thread --with-iostreams --with-filesystem --with-system --with-regex --with-date_time --with-program_options </pre> </li>
<li>
Extra recommended boost build options:<pre class="fragment">--with-python </pre> </li>
</ul>
</li>
<li>
<a href="http://www.open-mpi.org">open-mpi </a> or any other <a href="http://www.mcs.anl.gov/research/projects/mpi/">MPI</a> distribution. </li>
</ul>
<p>Besides creating C++ applications using the coolfluid libraries, coolfluid libraries can also be used in two additional ways. It is therefore highly recommended to make sure following dependencies are also available: </p><ul>
<li>
coolfluid-client user interface, based on <a href="http://qt.nokia.com">Nokia's Qt Libraries</a>, providing full client-server interaction. <ul>
<li>
The open source version of the Qt Libraries can be found <a href="http://qt.nokia.com/downloads/downloads#qt-lib">here</a>. </li>
</ul>
</li>
<li>
<a href="http://www.python.org/">Python</a> scripting. <ul>
<li>
Python must be available </li>
<li>
boost must be compiled with Python support </li>
</ul>
</li>
</ul>
<p>Other recommended third party libraries: </p><ul>
<li>
Any of these parallel distributed mesh-partitioning libraries: <ul>
<li>
<a href="http://www.labri.fr/perso/pelegrin/scotch/">PTScotch</a> </li>
<li>
<a href="http://www.cs.sandia.gov/Zoltan/">Zoltan</a> (also sub-package of Trilinos) </li>
</ul>
</li>
<li>
<a href="http://trilinos.sandia.gov/">Trilinos</a> for solving parallel distributed linear systems </li>
<li>
<a href="http://cgns.sourceforge.net/">CGNS</a> to read and write meshes in cgns format </li>
<li>
<a href="http://www.paraview.org/">Paraview</a> libraries compiled with MPI for use with the coolfluid-client user interface, to visualize meshes. </li>
</ul>
<p>Other supported third party libraries of little use at the moment: </p><ul>
<li>
<a href="http://www.cgal.org/">CGAL</a> for geometry related algorithms and mesh triangulation </li>
<li>
<a href="http://code.google.com/p/google-perftools/">google-perftools</a> to inspect performance </li>
<li>
<a href="http://crd.lbl.gov/~xiaoye/SuperLU/">superlu</a> to solve linear systems (not parallel) </li>
</ul>
<h2><a class="anchor" id="_installation_install_deps"></a>
Installation of dependencies</h2>
<p>To make life easier for you, we provide a script with the coolfluid sources that downloads and installs the required dependencies, but without any guarantee of success for your specific architecture! It is also recommended to install the dependencies not in the system, but in your home directory where you have all the access-privileges (e.g. on high-performance computing clusters).</p>
<dl class="section note"><dt>Note</dt><dd>Qt must be installed beforehand, (not through the script). Source code as well as pre-compiled binaries can be found <a href="http://qt.nokia.com/downloads/downloads#qt-lib">here</a>.</dd></dl>
<p>Continuing where we left off: </p><pre class="fragment">$&gt; mkdir $CF3/deps
$&gt; $CF3/kernel/tools/install-deps.pl --no-fortran --install-dir=$CF3/deps --install=recommended --no-fortran
</pre><p> Please check $CF3/kernel/tools/install-deps.pl &ndash;help for all available options of this script Use the option "--dry-run" to check what the script will do normally, without actually doing anything.<br />
The "--install=recommended" argument is equivalent to "--install=cmake,boost,openmpi,parmetis,zoltan,trilinos,hdf5,cgns". It is self-explanatory that you can choose to omit or add extra libraries to install. The "--no-fortran" option is there because e.g. Mac OSX does not come with a Fortran compiler.</p>
<h2><a class="anchor" id="_installation_export_dependencies"></a>
Export dependencies</h2>
<p>Since the dependencies were not installed in the system directories but in $CF3/deps, we have to let the system know to look for these dependencies there.</p>
<p>You might want to save this in your bash startup script (~/.bash_profile or ~/.bash_rc &ndash; create it if it doesn't exist) </p><pre class="fragment">$&gt; export CF3=complete/path/to/coolfluid3    # notice to replace the complete path!
$&gt; export PATH=$CF3/deps/bin:$PATH
$&gt; export LD_LIBRARY_PATH=$CF3/deps/lib:$LD_LIBRARY_PATH
$&gt; export DYLD_LIBRARY_PATH=$CF3/deps/lib:$DYLD_LIBRARY_PATH
</pre><hr/>
<h1><a class="anchor" id="_installation_build_coolfluid"></a>
Build COOLFluiD</h1>
<p>On this phase you will select your building options for <a class="el" href="namespacecf3.html" title="Top-level namespace for coolfluid. ">cf3</a> Repeat this phase as often as you need and whenever you want to refresh your build directory.</p>
<h2><a class="anchor" id="_installation_create_a_build_directory_separate_from_the_sources"></a>
Create a build directory separate from the sources</h2>
<pre class="fragment">$&gt; cd $CF3
$&gt; mkdir build
</pre><h2><a class="anchor" id="_installation_configure_the_build_with_your_options"></a>
Configure the build with your options</h2>
<p>Unlike COOLFluiD 2, there is no prepare.pl script. The developer must now call CMake directly. CMake is a cross platform configuration/build system. The developer is advised to read the <a href="http://www.cmake.org/cmake/help/documentation.html">CMake documentation</a> for advanced configuration. </p><pre class="fragment">$&gt; cd $CF3/build
$&gt; cmake -DDEPS_ROOT=$CF3/deps    $CF3/kernel
</pre><h3><a class="anchor" id="_installation_build_type_options"></a>
Build type options</h3>
<p>By default CF builds with some optimization and with debug symbols. This is equivalent to passing the option "-DCMAKE_BUILD_TYPE=RelWithDebInfo". Available build types are:</p>
<pre class="fragment">-DCMAKE_BUILD_TYPE=RelWithDebInfo
-DCMAKE_BUILD_TYPE=Release (no debug symbols)
-DCMAKE_BUILD_TYPE=Debug (no optimization)
</pre><h3><a class="anchor" id="_installation_some_more_configuration_options"></a>
Some more configuration options</h3>
<p>To force a specific compiler: </p><pre class="fragment">-DCMAKE_C_COMPILER=$CF3/deps/bin/mpicc
-DCMAKE_CXX_COMPILER=$CF3/deps/bin/mpicxx
</pre><p> If CMake cannot find the MPI environment: </p><pre class="fragment">-DMPI_C_COMPILER=$CF3/deps/bin/mpicc
-DMPI_CXX_COMPILER=$CF3/deps/bin/mpicxx
</pre><p> A few other options that can be used: </p><pre class="fragment">-DCF3_CXX_FLAGS="-march=Core2"       # Architecture optimization for Core2
-DCF3_SKIP_FORTRAN=ON                # When you don't need or don't have Fortran installed
-DCF3_ENABLE_WARNINGS=OFF            # For users that don't want to see all the warnings
-DCF3_ENABLE_GUI=OFF                 # When the gui is not to be built
</pre><h3><a class="anchor" id="_installation_customizing_configuration_further"></a>
Customizing configuration further</h3>
<p>Calling the command </p><pre class="fragment">$&gt; cd $CF3/build
$&gt; ccmake ./
</pre><p> This will show the interactive CMake configuration, where all available options are visible and can be changed. Press 'c' to configure, and afterwards 'g' to generate the build files.</p>
<h2><a class="anchor" id="_installation_compiling_coolfluid"></a>
Compiling COOLFluiD</h2>
<p>By default, the CMake configuration generates <a href="http://en.wikipedia.org/wiki/Make_(software)">makefiles</a> to compile COOLFluiD. This is used by </p><pre class="fragment">$&gt; cd $CF3/build
$&gt; make -j2
</pre><p> with the <code>"-j2"</code> assigning 2 processes to the compilation (e.g. for dual core)</p>
<h2><a class="anchor" id="_installation_xcode_builds"></a>
Xcode builds (MacOS X)</h2>
<p>Alternately the CMake argument <code>-G"Xcode"</code> can be used: </p><pre class="fragment">$&gt; cd $CF3/build
$&gt; cmake -DDEPS_ROOT=$CF3/deps -G"Xcode"  $CF3/kernel
</pre><p> This will generate an <a href="http://developer.apple.com/xcode/">Xcode</a> project instead of makefiles. Xcode comes with a debugger and other nice features to help developers. </p><dl class="section note"><dt>Note</dt><dd>Xcode version 4 is found to be nearly unusable due to high memory requirements at the "indexing" stage, version 3 is recommended.</dd></dl>
<hr/>
<h1><a class="anchor" id="_installation_running_coolfluid_tests"></a>
Running COOLFluiD tests</h1>
<p>Coolfluid has many unit tests and acceptance tests. Unit tests are small executables that run each a maximum of 1 to 2 seconds, and test various classes and functions of coolfluid. They serve also as mini-manuals and examples of how to use coolfluid. Acceptance tests are typically more full simulations that take a longer time to finish. They are typically made in the form of a script that gets executed by a coolfluid command-line interpreter <a class="el" href="coolfluid-command.html">coolfluid-command</a>.</p>
<p>To compile the tests, the developer has to make sure that the flags <code>"-DCF3_ENABLE_UNIT_TESTS"</code> and <code>"-DCF3_ENABLE_ACCEPTANCE_TESTS"</code> are passed to the CMake configuration. (They are on by default, but can be changed using <code>"ccmake"</code>) To run the tests: </p><pre class="fragment">$&gt; cd $CF3/build
$&gt; ctest
</pre><p> Individual tests can be selected. The developer is referred to the <a href="http://www.cmake.org/cmake/help/ctest-2-8-docs.html">CTest documentation</a>. </p>
</div></div><!-- contents -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Jun 14 2015 21:20:18 for COOLFluiD by&nbsp;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.9.1</small></address>
<table width="100%">
  <tr>
    <td>
    </td>
    <td align="right" valign="center">
      Send comments to:<br>
      <a href="mailto:coolfluid@vki.ac.be">COOLFluiD Web Admin</a>
    </td>
  </tr>
</table>
</body>
</html>
